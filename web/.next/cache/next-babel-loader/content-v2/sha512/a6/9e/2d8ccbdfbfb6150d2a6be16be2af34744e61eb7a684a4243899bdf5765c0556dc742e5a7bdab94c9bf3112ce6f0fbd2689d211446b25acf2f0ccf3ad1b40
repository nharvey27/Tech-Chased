{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/nicholasharvey/Desktop/programming/techChased/web/src/pages/tickets/[id].tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Box, Flex, Grid, GridItem, Heading, IconButton, Link, Stack, Text } from \"@chakra-ui/react\";\nimport React from \"react\";\nimport { Layout } from \"../../components/Layout\";\nimport { useGetTicketFromUrl } from \"../../utils/useGetTicketFromUrl\";\nimport { withApollo } from \"../../utils/withApollo\";\nimport NextLink from \"next/link\";\nimport { TicketDocument, useCreateCommentMutation, useDeleteTicketMutation } from \"../../generated/graphql\";\nimport { DeleteIcon } from \"@chakra-ui/icons\";\nimport { useRouter } from \"next/router\";\nimport { Form, Formik } from \"formik\";\nimport { InputField } from \"../../components/inputField\";\n\nconst Ticket = ({}) => {\n  var _data$ticket$comments;\n\n  const {\n    data,\n    error,\n    loading\n  } = useGetTicketFromUrl();\n  const [deleteTicket] = useDeleteTicketMutation();\n  const [createComment] = useCreateCommentMutation();\n  const router = useRouter();\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Layout, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"loading..\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this);\n  }\n\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: error.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 12\n    }, this);\n  }\n\n  if (!(data !== null && data !== void 0 && data.ticket)) {\n    return /*#__PURE__*/_jsxDEV(Layout, {\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        children: \" Could not find ticket.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: [/*#__PURE__*/_jsxDEV(Stack, {\n      ml: 4,\n      mb: 10,\n      mt: -2,\n      bg: \"yellow.400\",\n      children: [/*#__PURE__*/_jsxDEV(Heading, {\n        as: \"h3\",\n        ml: 4,\n        size: \"lg\",\n        mb: 3,\n        mt: 3,\n        children: [\"Details for Ticket #\", data.ticket.id]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Flex, {\n        alignItems: \"center\",\n        children: [/*#__PURE__*/_jsxDEV(NextLink, {\n          href: `/tickets/edit/${data.ticket.id}`,\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            ml: 4,\n            children: \"Edit |\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          icon: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 19\n          }, this),\n          \"aria-label\": \"Delete Ticket\",\n          onClick: () => {\n            deleteTicket({\n              variables: {\n                id: data.ticket.id\n              },\n              update: cache => {\n                cache.evict({\n                  id: \"Ticket:\" + data.ticket.id\n                });\n                router.back();\n              }\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      gridTemplateColumns: \"repeat(2, 50%)\",\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        ml: 4,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          templateColumns: \"repeat(2,1fr)\",\n          templateRows: \"auto\",\n          children: [/*#__PURE__*/_jsxDEV(GridItem, {\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              mb: 4,\n              children: [/*#__PURE__*/_jsxDEV(Heading, {\n                mb: 2,\n                as: \"h5\",\n                size: \"sm\",\n                children: \"Ticket Title\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Text, {\n                ml: 4,\n                size: \"xs\",\n                children: data.ticket.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(GridItem, {\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              mb: 4,\n              children: [/*#__PURE__*/_jsxDEV(Heading, {\n                mb: 2,\n                as: \"h5\",\n                size: \"sm\",\n                children: \"Ticket Description\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Text, {\n                ml: 4,\n                size: \"xs\",\n                children: data.ticket.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(GridItem, {\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              mb: 4,\n              children: [/*#__PURE__*/_jsxDEV(Heading, {\n                mb: 2,\n                as: \"h5\",\n                size: \"sm\",\n                children: \"Ticket Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Text, {\n                ml: 4,\n                size: \"xs\",\n                children: data.ticket.status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(GridItem, {\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              mb: 4,\n              children: [/*#__PURE__*/_jsxDEV(Heading, {\n                mb: 2,\n                as: \"h5\",\n                size: \"sm\",\n                children: \"Ticket Priority\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Text, {\n                ml: 4,\n                size: \"xs\",\n                children: data.ticket.priority\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(GridItem, {\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              mb: 4,\n              children: [/*#__PURE__*/_jsxDEV(Heading, {\n                mb: 2,\n                as: \"h5\",\n                size: \"sm\",\n                children: \"Created At\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Text, {\n                ml: 4,\n                size: \"xs\",\n                children: data.ticket.createdAt\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(GridItem, {\n            children: [/*#__PURE__*/_jsxDEV(Heading, {\n              mb: 2,\n              as: \"h5\",\n              size: \"sm\",\n              children: \"Last Updated\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Text, {\n              ml: 4,\n              size: \"xs\",\n              children: data.ticket.updatedAt\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        mr: 4,\n        children: /*#__PURE__*/_jsxDEV(Stack, {\n          children: [(_data$ticket$comments = data.ticket.comments) === null || _data$ticket$comments === void 0 ? void 0 : _data$ticket$comments.map(comment => {\n            /*#__PURE__*/\n            _jsxDEV(Text, {\n              children: comment.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 15\n            }, this);\n\n            /*#__PURE__*/\n            _jsxDEV(Heading, {\n              children: comment.user.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this);\n          }), /*#__PURE__*/_jsxDEV(Formik, {\n            initialValues: {\n              text: \"\"\n            },\n            onSubmit: async values => {\n              const comment = await createComment({\n                variables: {\n                  options: _objectSpread({}, values),\n                  ticketId: data.ticket.id\n                },\n                refetchQueries: [TicketDocument]\n              });\n            },\n            children: /*#__PURE__*/_jsxDEV(Form, {\n              children: /*#__PURE__*/_jsxDEV(InputField, {\n                textarea: true,\n                name: \"text\",\n                label: \"\",\n                placeholder: \"Comment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};\n\nexport default withApollo({\n  ssr: true\n})(Ticket);","map":{"version":3,"sources":["/Users/nicholasharvey/Desktop/programming/techChased/web/src/pages/tickets/[id].tsx"],"names":["Box","Flex","Grid","GridItem","Heading","IconButton","Link","Stack","Text","React","Layout","useGetTicketFromUrl","withApollo","NextLink","TicketDocument","useCreateCommentMutation","useDeleteTicketMutation","DeleteIcon","useRouter","Form","Formik","InputField","Ticket","data","error","loading","deleteTicket","createComment","router","message","ticket","id","variables","update","cache","evict","back","title","description","status","priority","createdAt","updatedAt","comments","map","comment","text","user","username","values","options","ticketId","refetchQueries","ssr"],"mappings":"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","sourcesContent":["import {\n  Box,\n  Flex,\n  Grid,\n  GridItem,\n  Heading,\n  IconButton,\n  Link,\n  Stack,\n  Text,\n} from \"@chakra-ui/react\";\nimport React from \"react\";\nimport { Layout } from \"../../components/Layout\";\nimport { useGetTicketFromUrl } from \"../../utils/useGetTicketFromUrl\";\nimport { withApollo } from \"../../utils/withApollo\";\nimport NextLink from \"next/link\";\nimport {\n  TicketDocument,\n  useCreateCommentMutation,\n  useDeleteTicketMutation,\n} from \"../../generated/graphql\";\nimport { DeleteIcon } from \"@chakra-ui/icons\";\nimport { useRouter } from \"next/router\";\nimport { Form, Formik } from \"formik\";\nimport { InputField } from \"../../components/inputField\";\n\nconst Ticket = ({}) => {\n  const { data, error, loading } = useGetTicketFromUrl();\n  const [deleteTicket] = useDeleteTicketMutation();\n  const [createComment] = useCreateCommentMutation();\n  const router = useRouter();\n\n  if (loading) {\n    return (\n      <Layout>\n        <div>loading..</div>\n      </Layout>\n    );\n  }\n\n  if (error) {\n    return <div>{error.message}</div>;\n  }\n  if (!data?.ticket) {\n    return (\n      <Layout>\n        <Box> Could not find ticket.</Box>\n      </Layout>\n    );\n  }\n  return (\n    <Layout>\n      <Stack ml={4} mb={10} mt={-2} bg=\"yellow.400\">\n        <Heading as=\"h3\" ml={4} size=\"lg\" mb={3} mt={3}>\n          Details for Ticket #{data.ticket.id}\n        </Heading>\n        <Flex alignItems=\"center\">\n          <NextLink href={`/tickets/edit/${data.ticket.id}`}>\n            <Link ml={4}>Edit |</Link>\n          </NextLink>\n          <IconButton\n            icon={<DeleteIcon />}\n            aria-label=\"Delete Ticket\"\n            onClick={() => {\n              deleteTicket({\n                variables: { id: data.ticket.id },\n                update: (cache) => {\n                  cache.evict({ id: \"Ticket:\" + data.ticket.id });\n                  router.back();\n                },\n              });\n            }}\n          />\n        </Flex>\n      </Stack>\n      <Grid gridTemplateColumns=\"repeat(2, 50%)\">\n        <Box ml={4}>\n          <Grid templateColumns=\"repeat(2,1fr)\" templateRows=\"auto\">\n            <GridItem>\n              <Box mb={4}>\n                <Heading mb={2} as=\"h5\" size=\"sm\">\n                  Ticket Title\n                </Heading>\n                <Text ml={4} size=\"xs\">\n                  {data.ticket.title}\n                </Text>\n              </Box>\n            </GridItem>\n            <GridItem>\n              <Box mb={4}>\n                <Heading mb={2} as=\"h5\" size=\"sm\">\n                  Ticket Description\n                </Heading>\n                <Text ml={4} size=\"xs\">\n                  {data.ticket.description}\n                </Text>\n              </Box>\n            </GridItem>\n            <GridItem>\n              <Box mb={4}>\n                <Heading mb={2} as=\"h5\" size=\"sm\">\n                  Ticket Status\n                </Heading>\n                <Text ml={4} size=\"xs\">\n                  {data.ticket.status}\n                </Text>\n              </Box>\n            </GridItem>\n            <GridItem>\n              <Box mb={4}>\n                <Heading mb={2} as=\"h5\" size=\"sm\">\n                  Ticket Priority\n                </Heading>\n                <Text ml={4} size=\"xs\">\n                  {data.ticket.priority}\n                </Text>\n              </Box>\n            </GridItem>\n            <GridItem>\n              <Box mb={4}>\n                <Heading mb={2} as=\"h5\" size=\"sm\">\n                  Created At\n                </Heading>\n                <Text ml={4} size=\"xs\">\n                  {data.ticket.createdAt}\n                </Text>\n              </Box>\n            </GridItem>\n            <GridItem>\n              <Heading mb={2} as=\"h5\" size=\"sm\">\n                Last Updated\n              </Heading>\n              <Text ml={4} size=\"xs\">\n                {data.ticket.updatedAt}\n              </Text>\n            </GridItem>\n          </Grid>\n        </Box>\n        <Box mr={4}>\n          <Stack>\n            {data.ticket.comments?.map((comment) => {\n              <Text>{comment.text}</Text>;\n              <Heading>{comment.user.username}</Heading>;\n            })}\n            <Formik\n              initialValues={{ text: \"\" }}\n              onSubmit={async (values) => {\n                const comment = await createComment({\n                  variables: {\n                    options: { ...values },\n                    ticketId: data.ticket.id,\n                  },\n                  refetchQueries: [TicketDocument],\n                });\n              }}\n            >\n              <Form>\n                <InputField\n                  textarea\n                  name=\"text\"\n                  label=\"\"\n                  placeholder=\"Comment\"\n                />\n              </Form>\n            </Formik>\n          </Stack>\n        </Box>\n      </Grid>\n    </Layout>\n  );\n};\n\nexport default withApollo({ ssr: true })(Ticket);\n"]},"metadata":{},"sourceType":"module"}