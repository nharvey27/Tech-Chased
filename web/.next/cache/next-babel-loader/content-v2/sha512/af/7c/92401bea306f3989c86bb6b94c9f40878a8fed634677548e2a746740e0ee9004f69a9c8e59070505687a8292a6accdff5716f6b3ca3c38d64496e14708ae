{"ast":null,"code":"import _regeneratorRuntime from \"/Users/nicholasharvey/Desktop/programming/techChased/web/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/nicholasharvey/Desktop/programming/techChased/web/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/Users/nicholasharvey/Desktop/programming/techChased/web/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _slicedToArray from \"/Users/nicholasharvey/Desktop/programming/techChased/web/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectDestructuringEmpty from \"/Users/nicholasharvey/Desktop/programming/techChased/web/node_modules/next/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty\";\n\nvar _jsxFileName = \"/Users/nicholasharvey/Desktop/programming/techChased/web/src/pages/tickets/[id].tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Box, Button, Flex, Grid, GridItem, Heading, IconButton, Link, List, ListItem, Stack, Text } from \"@chakra-ui/react\";\nimport React from \"react\";\nimport { Layout } from \"../../components/Layout\";\nimport { useGetTicketFromUrl } from \"../../utils/useGetTicketFromUrl\";\nimport { withApollo } from \"../../utils/withApollo\";\nimport NextLink from \"next/link\";\nimport { useCreateCommentMutation, useDeleteTicketMutation } from \"../../generated/graphql\";\nimport { DeleteIcon } from \"@chakra-ui/icons\";\nimport { useRouter } from \"next/router\";\nimport { Form, Formik } from \"formik\";\nimport { InputField } from \"../../components/inputField\";\n\nvar Ticket = function Ticket(_ref) {\n  _s();\n\n  var _data$ticket, _data$ticket$comments;\n\n  _objectDestructuringEmpty(_ref);\n\n  var _useGetTicketFromUrl = useGetTicketFromUrl(),\n      data = _useGetTicketFromUrl.data,\n      error = _useGetTicketFromUrl.error,\n      loading = _useGetTicketFromUrl.loading;\n\n  var _useDeleteTicketMutat = useDeleteTicketMutation(),\n      _useDeleteTicketMutat2 = _slicedToArray(_useDeleteTicketMutat, 1),\n      deleteTicket = _useDeleteTicketMutat2[0];\n\n  var _useCreateCommentMuta = useCreateCommentMutation(),\n      _useCreateCommentMuta2 = _slicedToArray(_useCreateCommentMuta, 1),\n      createComment = _useCreateCommentMuta2[0];\n\n  var router = useRouter();\n  console.log(data === null || data === void 0 ? void 0 : data.ticket.comments);\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Layout, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"loading..\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, _this);\n  }\n\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: error.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 12\n    }, _this);\n  }\n\n  if (!(data !== null && data !== void 0 && data.ticket)) {\n    return /*#__PURE__*/_jsxDEV(Layout, {\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        children: \" Could not find ticket.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, _this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: [data.ticket.comments[0].text, /*#__PURE__*/_jsxDEV(Stack, {\n      ml: 4,\n      mb: 10,\n      mt: -2,\n      bg: \"yellow.400\",\n      children: [/*#__PURE__*/_jsxDEV(Heading, {\n        as: \"h3\",\n        ml: 4,\n        size: \"lg\",\n        mb: 3,\n        mt: 3,\n        children: [\"Details for Ticket #\", data.ticket.id]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Flex, {\n        alignItems: \"center\",\n        children: [/*#__PURE__*/_jsxDEV(NextLink, {\n          href: \"/tickets/edit/\".concat(data.ticket.id),\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            ml: 4,\n            children: \"Edit |\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(IconButton, {\n          icon: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 19\n          }, _this),\n          \"aria-label\": \"Delete Ticket\",\n          onClick: function onClick() {\n            deleteTicket({\n              variables: {\n                id: data.ticket.id\n              },\n              update: function update(cache) {\n                cache.evict({\n                  id: \"Ticket:\" + data.ticket.id\n                });\n                router.back();\n              }\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Grid, {\n      gridTemplateColumns: \"repeat(2, 50%)\",\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        ml: 4,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          templateColumns: \"repeat(2,1fr)\",\n          templateRows: \"auto\",\n          children: [/*#__PURE__*/_jsxDEV(GridItem, {\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              mb: 4,\n              children: [/*#__PURE__*/_jsxDEV(Heading, {\n                mb: 2,\n                as: \"h5\",\n                size: \"sm\",\n                children: \"Ticket Title\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(Text, {\n                ml: 4,\n                size: \"xs\",\n                children: data.ticket.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(GridItem, {\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              mb: 4,\n              children: [/*#__PURE__*/_jsxDEV(Heading, {\n                mb: 2,\n                as: \"h5\",\n                size: \"sm\",\n                children: \"Ticket Description\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(Text, {\n                ml: 4,\n                size: \"xs\",\n                children: data.ticket.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(GridItem, {\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              mb: 4,\n              children: [/*#__PURE__*/_jsxDEV(Heading, {\n                mb: 2,\n                as: \"h5\",\n                size: \"sm\",\n                children: \"Ticket Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(Text, {\n                ml: 4,\n                size: \"xs\",\n                children: data.ticket.status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(GridItem, {\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              mb: 4,\n              children: [/*#__PURE__*/_jsxDEV(Heading, {\n                mb: 2,\n                as: \"h5\",\n                size: \"sm\",\n                children: \"Ticket Priority\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(Text, {\n                ml: 4,\n                size: \"xs\",\n                children: data.ticket.priority\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(GridItem, {\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              mb: 4,\n              children: [/*#__PURE__*/_jsxDEV(Heading, {\n                mb: 2,\n                as: \"h5\",\n                size: \"sm\",\n                children: \"Created At\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(Text, {\n                ml: 4,\n                size: \"xs\",\n                children: data.ticket.createdAt\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(GridItem, {\n            children: [/*#__PURE__*/_jsxDEV(Heading, {\n              mb: 2,\n              as: \"h5\",\n              size: \"sm\",\n              children: \"Last Updated\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(Text, {\n              ml: 4,\n              size: \"xs\",\n              children: data.ticket.updatedAt\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Box, {\n        mr: 4,\n        ml: 6,\n        mb: 4,\n        children: [/*#__PURE__*/_jsxDEV(List, {\n          children: data === null || data === void 0 ? void 0 : (_data$ticket = data.ticket) === null || _data$ticket === void 0 ? void 0 : (_data$ticket$comments = _data$ticket.comments) === null || _data$ticket$comments === void 0 ? void 0 : _data$ticket$comments.map(function (comment) {\n            return /*#__PURE__*/_jsxDEV(Flex, {\n              flexWrap: \"wrap\",\n              mb: 4,\n              children: [/*#__PURE__*/_jsxDEV(ListItem, {\n                children: /*#__PURE__*/_jsxDEV(Text, {\n                  wordBreak: \"break-all\",\n                  children: [comment.text, \"lasdjflajsdfljasdf;lkjasd;lkfjalsdjfl;asjflasdjf;lajsdlfjasl;asdfasdfasdfasdfsadfasdfasdfsfas;l\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 21\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 19\n              }, _this), /*#__PURE__*/_jsxDEV(ListItem, {\n                justifyContent: \"flex-end\",\n                children: /*#__PURE__*/_jsxDEV(Heading, {\n                  as: \"h6\",\n                  size: \"sm\",\n                  children: comment.user.username\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 21\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 19\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 17\n            }, _this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Formik, {\n          initialValues: {\n            text: \"\"\n          },\n          onSubmit: /*#__PURE__*/function () {\n            var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n              var _yield$createComment, errors;\n\n              return _regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      _context.next = 2;\n                      return createComment({\n                        variables: {\n                          options: _objectSpread({}, values),\n                          ticketId: data.ticket.id\n                        } // refetchQueries: [{ query: TicketDocument }],\n\n                      });\n\n                    case 2:\n                      _yield$createComment = _context.sent;\n                      errors = _yield$createComment.errors;\n\n                      // todo improve error handling\n                      if (errors) {\n                        console.log(errors);\n                      }\n\n                    case 5:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee);\n            }));\n\n            return function (_x) {\n              return _ref2.apply(this, arguments);\n            };\n          }(),\n          children: function children(_ref3) {\n            var isSubmitting = _ref3.isSubmitting;\n            return /*#__PURE__*/_jsxDEV(Box, {\n              children: /*#__PURE__*/_jsxDEV(Form, {\n                children: [/*#__PURE__*/_jsxDEV(InputField, {\n                  name: \"text\",\n                  label: \"text\",\n                  placeholder: \"Comment\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 19\n                }, _this), /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"submit\",\n                  isLoading: isSubmitting,\n                  bg: \"teal\",\n                  children: \"Create Comment\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 185,\n                  columnNumber: 19\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 15\n            }, _this);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(Ticket, \"+DMgyJFU8ZMJwyc1AnNitX4ZPg4=\", false, function () {\n  return [useGetTicketFromUrl, useDeleteTicketMutation, useCreateCommentMutation, useRouter];\n});\n\n_c = Ticket;\nexport default withApollo({\n  ssr: true\n})(Ticket);\n\nvar _c;\n\n$RefreshReg$(_c, \"Ticket\");","map":{"version":3,"sources":["/Users/nicholasharvey/Desktop/programming/techChased/web/src/pages/tickets/[id].tsx"],"names":["Box","Button","Flex","Grid","GridItem","Heading","IconButton","Link","List","ListItem","Stack","Text","React","Layout","useGetTicketFromUrl","withApollo","NextLink","useCreateCommentMutation","useDeleteTicketMutation","DeleteIcon","useRouter","Form","Formik","InputField","Ticket","data","error","loading","deleteTicket","createComment","router","console","log","ticket","comments","message","text","id","variables","update","cache","evict","back","title","description","status","priority","createdAt","updatedAt","map","comment","user","username","values","options","ticketId","errors","isSubmitting","ssr"],"mappings":"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","sourcesContent":["import {\n  Box,\n  Button,\n  Flex,\n  Grid,\n  GridItem,\n  Heading,\n  IconButton,\n  Link,\n  List,\n  ListItem,\n  Stack,\n  Text,\n} from \"@chakra-ui/react\";\nimport React from \"react\";\nimport { Layout } from \"../../components/Layout\";\nimport { useGetTicketFromUrl } from \"../../utils/useGetTicketFromUrl\";\nimport { withApollo } from \"../../utils/withApollo\";\nimport NextLink from \"next/link\";\nimport {\n  useCreateCommentMutation,\n  useDeleteTicketMutation,\n} from \"../../generated/graphql\";\nimport { DeleteIcon } from \"@chakra-ui/icons\";\nimport { useRouter } from \"next/router\";\nimport { Form, Formik } from \"formik\";\nimport { InputField } from \"../../components/inputField\";\n\nconst Ticket = ({}) => {\n  const { data, error, loading } = useGetTicketFromUrl();\n  const [deleteTicket] = useDeleteTicketMutation();\n  const [createComment] = useCreateCommentMutation();\n  const router = useRouter();\n\n  console.log(data?.ticket.comments);\n  if (loading) {\n    return (\n      <Layout>\n        <div>loading..</div>\n      </Layout>\n    );\n  }\n\n  if (error) {\n    return <div>{error.message}</div>;\n  }\n  if (!data?.ticket) {\n    return (\n      <Layout>\n        <Box> Could not find ticket.</Box>\n      </Layout>\n    );\n  }\n  return (\n    <Layout>\n      {data.ticket.comments[0].text}\n      <Stack ml={4} mb={10} mt={-2} bg=\"yellow.400\">\n        <Heading as=\"h3\" ml={4} size=\"lg\" mb={3} mt={3}>\n          Details for Ticket #{data.ticket.id}\n        </Heading>\n        <Flex alignItems=\"center\">\n          <NextLink href={`/tickets/edit/${data.ticket.id}`}>\n            <Link ml={4}>Edit |</Link>\n          </NextLink>\n          <IconButton\n            icon={<DeleteIcon />}\n            aria-label=\"Delete Ticket\"\n            onClick={() => {\n              deleteTicket({\n                variables: { id: data.ticket.id },\n                update: (cache) => {\n                  cache.evict({ id: \"Ticket:\" + data.ticket.id });\n                  router.back();\n                },\n              });\n            }}\n          />\n        </Flex>\n      </Stack>\n      <Grid gridTemplateColumns=\"repeat(2, 50%)\">\n        <Box ml={4}>\n          <Grid templateColumns=\"repeat(2,1fr)\" templateRows=\"auto\">\n            <GridItem>\n              <Box mb={4}>\n                <Heading mb={2} as=\"h5\" size=\"sm\">\n                  Ticket Title\n                </Heading>\n                <Text ml={4} size=\"xs\">\n                  {data.ticket.title}\n                </Text>\n              </Box>\n            </GridItem>\n            <GridItem>\n              <Box mb={4}>\n                <Heading mb={2} as=\"h5\" size=\"sm\">\n                  Ticket Description\n                </Heading>\n                <Text ml={4} size=\"xs\">\n                  {data.ticket.description}\n                </Text>\n              </Box>\n            </GridItem>\n            <GridItem>\n              <Box mb={4}>\n                <Heading mb={2} as=\"h5\" size=\"sm\">\n                  Ticket Status\n                </Heading>\n                <Text ml={4} size=\"xs\">\n                  {data.ticket.status}\n                </Text>\n              </Box>\n            </GridItem>\n            <GridItem>\n              <Box mb={4}>\n                <Heading mb={2} as=\"h5\" size=\"sm\">\n                  Ticket Priority\n                </Heading>\n                <Text ml={4} size=\"xs\">\n                  {data.ticket.priority}\n                </Text>\n              </Box>\n            </GridItem>\n            <GridItem>\n              <Box mb={4}>\n                <Heading mb={2} as=\"h5\" size=\"sm\">\n                  Created At\n                </Heading>\n                <Text ml={4} size=\"xs\">\n                  {data.ticket.createdAt}\n                </Text>\n              </Box>\n            </GridItem>\n            <GridItem>\n              <Heading mb={2} as=\"h5\" size=\"sm\">\n                Last Updated\n              </Heading>\n              <Text ml={4} size=\"xs\">\n                {data.ticket.updatedAt}\n              </Text>\n            </GridItem>\n          </Grid>\n        </Box>\n        <Box mr={4} ml={6} mb={4}>\n          <List>\n            {data?.ticket?.comments?.map((comment) => {\n              return (\n                <Flex flexWrap=\"wrap\" mb={4}>\n                  <ListItem>\n                    <Text wordBreak=\"break-all\">\n                      {comment.text}\n                      lasdjflajsdfljasdf;lkjasd;lkfjalsdjfl;asjflasdjf;lajsdlfjasl;asdfasdfasdfasdfsadfasdfasdfsfas;l\n                    </Text>\n                  </ListItem>\n                  <ListItem justifyContent=\"flex-end\">\n                    <Heading as=\"h6\" size=\"sm\">\n                      {comment.user.username}\n                    </Heading>\n                  </ListItem>\n                </Flex>\n              );\n            })}\n          </List>\n\n          <Formik\n            initialValues={{ text: \"\" }}\n            onSubmit={async (values) => {\n              const { errors } = await createComment({\n                variables: {\n                  options: { ...values },\n                  ticketId: data.ticket.id,\n                },\n\n                // refetchQueries: [{ query: TicketDocument }],\n              });\n              // todo improve error handling\n              if (errors) {\n                console.log(errors);\n              }\n            }}\n          >\n            {({ isSubmitting }) => (\n              <Box>\n                <Form>\n                  <InputField name=\"text\" label=\"text\" placeholder=\"Comment\" />\n                  <Button type=\"submit\" isLoading={isSubmitting} bg=\"teal\">\n                    Create Comment\n                  </Button>\n                </Form>\n              </Box>\n            )}\n          </Formik>\n        </Box>\n      </Grid>\n    </Layout>\n  );\n};\n\nexport default withApollo({ ssr: true })(Ticket);\n"]},"metadata":{},"sourceType":"module"}